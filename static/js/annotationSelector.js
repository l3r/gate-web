// Generated by CoffeeScript 1.11.1
var AnnotationSelector,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

AnnotationSelector = (function() {

  /* Shows a control to allow the user to select which annotation sets are displayed */
  function AnnotationSelector(target) {
    this.target = target;
    this.viewer = null;
    this.selected = [];
  }

  AnnotationSelector.prototype.show = function(annotationSets1) {
    this.annotationSets = annotationSets1;
    this.update();
    return this.updateSelection();
  };

  AnnotationSelector.prototype.update = function() {
    var annotationSelections, annotationSet, annotations, entry, ref;
    annotationSelections = $.parseHTML("<form></form>");
    ref = this.annotationSets;
    for (annotationSet in ref) {
      annotations = ref[annotationSet];
      entry = $.parseHTML("<label style='color: " + (this.viewer.annotationDisplay.makeColourString(this.viewer.annotationDisplay.getTypeColour(annotationSet, 1))) + "'> <input type='checkbox' name='annotations' value='" + annotationSet + "'> " + annotationSet + "</label><br>");
      if (indexOf.call(this.selected, annotationSet) >= 0) {
        $(entry).find('input:checkbox').attr("checked", true);
      }
      $(annotationSelections).append(entry);
    }
    $(annotationSelections).find("input:checkbox").on("change", this.updateSelection.bind(this));
    this.target.empty();
    return this.target.append(annotationSelections);
  };

  AnnotationSelector.prototype.updateSelection = function() {
    var annotationSets;
    annotationSets = [];
    $(this.target).find("input:checked").map(function() {
      return $(this).val();
    }).each((function(_this) {
      return function(index, selection) {
        return annotationSets.push(selection);
      };
    })(this));
    this.selected = annotationSets;
    return this.viewer.showAnnotationSets(annotationSets);
  };

  return AnnotationSelector;

})();

//# sourceMappingURL=annotationSelector.js.map
